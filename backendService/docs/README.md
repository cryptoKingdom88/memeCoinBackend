# Backend WebSocket Service Documentation

This directory contains comprehensive API documentation for the Backend WebSocket Service.

## Available Documentation

### 1. REST API Documentation (Swagger/OpenAPI)
- **URL**: [http://localhost:8080/docs/](http://localhost:8080/docs/)
- **Format**: Interactive Swagger UI
- **Content**: REST endpoints (health check, WebSocket upgrade)

### 2. WebSocket API Documentation
- **URL**: [http://localhost:8080/websocket-docs/websocket_api.html](http://localhost:8080/websocket-docs/websocket_api.html)
- **Format**: HTML documentation
- **Content**: Complete WebSocket API guide with examples

### 3. Markdown Documentation
- **File**: `websocket_api.md`
- **Format**: Markdown
- **Content**: Detailed WebSocket API documentation

## Quick Links

- **Service Health**: [http://localhost:8080/health](http://localhost:8080/health)
- **WebSocket Endpoint**: `ws://localhost:8080/ws`
- **Root Redirect**: [http://localhost:8080/](http://localhost:8080/) â†’ redirects to Swagger docs

## Generated Files

The following files are automatically generated by the `swag` tool:

- `docs.go` - Go package with embedded documentation
- `swagger.json` - OpenAPI specification in JSON format
- `swagger.yaml` - OpenAPI specification in YAML format

To regenerate these files after making changes to API annotations:

```bash
swag init
```

## API Overview

### REST Endpoints

| Method | Path | Description |
|--------|------|-------------|
| GET | `/` | Redirects to documentation |
| GET | `/health` | Service health check |
| GET | `/ws` | WebSocket upgrade endpoint |
| GET | `/docs/*` | Swagger UI documentation |
| GET | `/websocket-docs/*` | Static WebSocket documentation |

### WebSocket Protocol

1. **Connect**: `ws://localhost:8080/ws`
2. **Subscribe**: Send `{"type": "subscribe", "channel": "dashboard"}`
3. **Receive**: Real-time data messages with types:
   - `token_info` - Token information updates
   - `trade_data` - Individual trade transactions
   - `aggregate_data` - Aggregated trading metrics

## Development

### Adding New Endpoints

1. Add Swagger annotations to your handler functions
2. Run `swag init` to regenerate documentation
3. Update this README if needed

### Testing Documentation

Start the server and visit the documentation URLs to verify everything works correctly:

```bash
go run main.go
```

Then open:
- http://localhost:8080/docs/ (Swagger UI)
- http://localhost:8080/websocket-docs/websocket_api.html (WebSocket docs)
- http://localhost:8080/health (Health check)